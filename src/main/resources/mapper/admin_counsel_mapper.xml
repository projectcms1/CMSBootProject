<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cms.ca.admin.counsel_repo">
<select id="counsel_list" resultType="com.cms.ca.view_counsel_dto" parameterType="Map" >
select * from VIEW_DSCSN_APLY
		<if test='part=="0"'>
			and now() > RSVT_DT and (STTS_CD = '취소' or STTS_CD = '완료') and ${search_part} like concat('%', #{search_word}, '%')
		</if>
		<if test='part=="1"'>
			and now() > RSVT_DT and (STTS_CD = '취소' or STTS_CD = '완료')
		</if>
		<if test='part=="2"'>
			and RSVT_DT >= now() and STTS_CD = '미승인'
		</if>
		<if test='part=="3"'>
			and RSVT_DT >= now() and STTS_CD = '승인'
		</if>
		<if test='part=="4"'>
			and RSVT_DT >= now() and (STTS_CD = '취소' or STTS_CD = '완료')
		</if>
		order by APLY_SN desc
		<if test='part=="0" or part=="1"'>
			limit ${pageno}, ${datano}
		</if>
</select>
</mapper>